<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Admin | DomiMarket</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;900&display=swap" rel="stylesheet">
    <style>
        body { background: #000; color: #fff; font-family: 'Poppins', sans-serif; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .admin-box { background: #111; padding: 30px; border-radius: 15px; border: 1px solid #ff0000; width: 90%; max-width: 400px; }
        h2 { color: #ff0000; text-align: center; }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; background: #222; border: 1px solid #333; border-radius: 5px; color: #fff; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: #ff0000; color: #fff; border: none; font-weight: 900; cursor: pointer; border-radius: 5px; }
        .back { margin-top: 20px; color: #555; text-decoration: none; font-size: 0.8rem; }
    </style>
</head>
<body>

    <div class="admin-box">
        <h2>Panel Administrativo</h2>
        <input type="text" id="nombre" placeholder="Nombre del Script">
        <input type="text" id="precio" placeholder="Precio (Ej: 15 USD)">
        <input type="text" id="imagen" placeholder="Link de la imagen">
        <textarea id="descripcion" placeholder="Descripción"></textarea>
        <button onclick="subir()">PUBLICAR PRODUCTO</button>
    </div>
    <a href="index.html" class="back">← Volver a la tienda</a>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
          apiKey: "AIzaSyA0B6BZdwXCXnidBn2seeZL7JdPjY6mTMc",
          authDomain: "domimarket-64ed1.firebaseapp.com",
          projectId: "domimarket-64ed1",
          storageBucket: "domimarket-64ed1.firebasestorage.app",
          messagingSenderId: "349796893686",
          appId: "1:349796893686:web:5d6f68b245f5ed31283dd7"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.subir = async function() {
            const n = document.getElementById('nombre').value;
            const p = document.getElementById('precio').value;
            const i = document.getElementById('imagen').value;
            const d = document.getElementById('descripcion').value;

            if(!n || !p) return alert("Pon nombre y precio");

            try {
                await addDoc(collection(db, "productos"), { nombre: n, precio: p, imagen: i, descripcion: d });
                alert("¡Producto en línea!");
                window.location.href = "index.html";
            } catch (e) { alert("Error: " + e.message); }
        }
    </script>
</body>
</html>